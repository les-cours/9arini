{"ast":null,"code":"var _jsxFileName = \"/home/chouaib/code/learn/frontend/containers/Calendar/index.tsx\";\nvar __jsx = React.createElement;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport React from 'react';\nimport moment from 'moment';\nimport { Calendar, Views, momentLocalizer } from 'react-big-calendar';\nimport { events } from './data';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport CreateOrUpdateEvent from './CreateOrUpdateEvent';\nconst localizer = momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(Calendar);\nfunction CalendarApp() {\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [actionType, setActionType] = React.useState('create');\n  const [event, setEvent] = React.useState(null);\n  const [state, setState] = React.useState({\n    events: events\n  });\n  function moveEvent({\n    event,\n    start,\n    end,\n    isAllDay: droppedOnAllDaySlot\n  }) {\n    const {\n      events\n    } = state;\n    const idx = events.indexOf(event);\n    let allDay = event.allDay;\n    if (!event.allDay && droppedOnAllDaySlot) {\n      allDay = true;\n    } else if (event.allDay && !droppedOnAllDaySlot) {\n      allDay = false;\n    }\n    const updatedEvent = _objectSpread(_objectSpread({}, event), {}, {\n      start,\n      end,\n      allDay\n    });\n    const nextEvents = [...events];\n    nextEvents.splice(idx, 1, updatedEvent);\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      events: nextEvents\n    }));\n\n    // alert(`${event.title} was dropped onto ${updatedEvent.start}`)\n  }\n  function resizeEvent({\n    event,\n    start,\n    end\n  }) {\n    const {\n      events\n    } = state;\n    const nextEvents = events.map(existingEvent => {\n      return existingEvent.id == event.id ? _objectSpread(_objectSpread({}, existingEvent), {}, {\n        start,\n        end\n      }) : existingEvent;\n    });\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      events: nextEvents\n    }));\n\n    //alert(`${event.title} was resized to ${start}-${end}`)\n  }\n  function newEvent(event) {\n    let idList = state.events.map(a => a.id);\n    let newId = Math.max(...idList) + 1;\n    let hour = {\n      id: newId,\n      title: event.title,\n      allDay: event.slots.length == 1,\n      desc: event.desc,\n      start: event.slots.length == 1 ? event.start : event.slots[0],\n      end: event.slots.length == 1 ? event.end : event.slots[1]\n    };\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      events: state.events.concat([hour])\n    }));\n    return;\n  }\n  function updateEvent(event) {\n    let updatedEvent = {\n      id: event.id,\n      title: event.title,\n      allDay: event.slots.length == 1,\n      desc: event.desc,\n      start: event.slots.length == 1 ? event.start : event.slots[0],\n      end: event.slots.length == 1 ? event.end : event.slots[1]\n    };\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      events: state.events.map(item => item.id === updatedEvent.id ? updatedEvent : item)\n    }));\n    return;\n  }\n  function onSubmit(value) {\n    setIsOpen(false);\n    setEvent(null);\n    if (actionType === 'create') {\n      newEvent(value);\n    }\n    if (actionType === 'update') {\n      updateEvent(value);\n    }\n  }\n  function onSelectEvent(selectedEvent) {\n    setIsOpen(true);\n    setEvent(selectedEvent);\n    setActionType('update');\n  }\n  function onSelectSlot(selectedSlot) {\n    setEvent(selectedSlot);\n    setActionType('create');\n    setIsOpen(true);\n  }\n  function close() {\n    setIsOpen(false);\n    setEvent(null);\n  }\n  return __jsx(React.Fragment, null, __jsx(DragAndDropCalendar, {\n    popup: true,\n    selectable: true,\n    localizer: localizer,\n    events: state.events,\n    onEventDrop: moveEvent,\n    resizable: true,\n    onEventResize: resizeEvent,\n    onSelectSlot: onSelectSlot,\n    onSelectEvent: onSelectEvent,\n    onDragStart: console.log,\n    defaultView: Views.MONTH,\n    defaultDate: new Date(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }), event && __jsx(CreateOrUpdateEvent, {\n    onClose: close,\n    isOpen: isOpen,\n    event: event,\n    type: actionType,\n    onSubmit: value => onSubmit(value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }));\n}\nexport default CalendarApp;","map":{"version":3,"names":["React","moment","Calendar","Views","momentLocalizer","events","withDragAndDrop","CreateOrUpdateEvent","localizer","DragAndDropCalendar","CalendarApp","isOpen","setIsOpen","useState","actionType","setActionType","event","setEvent","state","setState","moveEvent","start","end","isAllDay","droppedOnAllDaySlot","idx","indexOf","allDay","updatedEvent","_objectSpread","nextEvents","splice","resizeEvent","map","existingEvent","id","newEvent","idList","a","newId","Math","max","hour","title","slots","length","desc","concat","updateEvent","item","onSubmit","value","onSelectEvent","selectedEvent","onSelectSlot","selectedSlot","close","__jsx","Fragment","popup","selectable","onEventDrop","resizable","onEventResize","onDragStart","console","log","defaultView","MONTH","defaultDate","Date","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClose","type"],"sources":["/home/chouaib/code/learn/frontend/containers/Calendar/index.tsx"],"sourcesContent":["import React from 'react';\nimport moment from 'moment';\nimport { Calendar, Views, momentLocalizer } from 'react-big-calendar';\nimport { events } from './data';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\n\nimport { addDays } from 'date-fns';\n\nimport CreateOrUpdateEvent from './CreateOrUpdateEvent';\nconst localizer: any = momentLocalizer(moment);\n\nconst DragAndDropCalendar = withDragAndDrop(Calendar);\n\nfunction CalendarApp() {\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [actionType, setActionType] = React.useState('create');\n  const [event, setEvent] = React.useState(null);\n\n  const [state, setState] = React.useState({\n    events: events,\n  });\n  function moveEvent({\n    event,\n    start,\n    end,\n    isAllDay: droppedOnAllDaySlot,\n  }: any) {\n    const { events } = state;\n\n    const idx = events.indexOf(event);\n    let allDay = event.allDay;\n\n    if (!event.allDay && droppedOnAllDaySlot) {\n      allDay = true;\n    } else if (event.allDay && !droppedOnAllDaySlot) {\n      allDay = false;\n    }\n\n    const updatedEvent = { ...event, start, end, allDay };\n\n    const nextEvents = [...events];\n    nextEvents.splice(idx, 1, updatedEvent);\n\n    setState({\n      ...state,\n      events: nextEvents,\n    });\n\n    // alert(`${event.title} was dropped onto ${updatedEvent.start}`)\n  }\n\n  function resizeEvent({ event, start, end }: any) {\n    const { events } = state;\n\n    const nextEvents = events.map((existingEvent) => {\n      return existingEvent.id == event.id\n        ? { ...existingEvent, start, end }\n        : existingEvent;\n    });\n\n    setState({\n      ...state,\n      events: nextEvents,\n    });\n\n    //alert(`${event.title} was resized to ${start}-${end}`)\n  }\n\n  function newEvent(event: any) {\n    let idList = state.events.map((a) => a.id);\n    let newId = Math.max(...idList) + 1;\n    let hour = {\n      id: newId,\n      title: event.title,\n      allDay: event.slots.length == 1,\n      desc: event.desc,\n      start: event.slots.length == 1 ? event.start : event.slots[0],\n      end: event.slots.length == 1 ? event.end : event.slots[1],\n    };\n    setState({\n      ...state,\n      events: state.events.concat([hour]),\n    });\n    return;\n  }\n  function updateEvent(event: any) {\n    let updatedEvent = {\n      id: event.id,\n      title: event.title,\n      allDay: event.slots.length == 1,\n      desc: event.desc,\n      start: event.slots.length == 1 ? event.start : event.slots[0],\n      end: event.slots.length == 1 ? event.end : event.slots[1],\n    };\n\n    setState({\n      ...state,\n      events: state.events.map((item) =>\n        item.id === updatedEvent.id ? updatedEvent : item\n      ),\n    });\n    return;\n  }\n\n  function onSubmit(value: any) {\n    setIsOpen(false);\n    setEvent(null);\n    if (actionType === 'create') {\n      newEvent(value);\n    }\n    if (actionType === 'update') {\n      updateEvent(value);\n    }\n  }\n  function onSelectEvent(selectedEvent: any) {\n    setIsOpen(true);\n    setEvent(selectedEvent);\n    setActionType('update');\n  }\n  function onSelectSlot(selectedSlot: any) {\n    setEvent(selectedSlot);\n    setActionType('create');\n    setIsOpen(true);\n  }\n  function close() {\n    setIsOpen(false);\n    setEvent(null);\n  }\n  return (\n    <>\n      <DragAndDropCalendar\n        popup\n        selectable\n        localizer={localizer}\n        events={state.events}\n        onEventDrop={moveEvent}\n        resizable\n        onEventResize={resizeEvent}\n        onSelectSlot={onSelectSlot}\n        onSelectEvent={onSelectEvent}\n        onDragStart={console.log}\n        defaultView={Views.MONTH}\n        defaultDate={new Date()}\n      />\n      {event && (\n        <CreateOrUpdateEvent\n          onClose={close}\n          isOpen={isOpen}\n          event={event}\n          type={actionType}\n          onSubmit={(value: any) => onSubmit(value)}\n        />\n      )}\n    </>\n  );\n}\n\nexport default CalendarApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}